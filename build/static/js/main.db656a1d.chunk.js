(this["webpackJsonpcapabilities-test-abhishek"]=this["webpackJsonpcapabilities-test-abhishek"]||[]).push([[0],{15:function(t,e,a){t.exports={app:"App_app__2ziFi",searchContainer:"App_searchContainer__GjdwS",container:"App_container__eSJ6i"}},16:function(t,e,a){t.exports={button:"button_button__2E0F5",mini:"button_mini__3TJT6",error:"button_error__2WB5U"}},17:function(t,e,a){t.exports={block:"block_block__cHoCW",body:"block_body__2yeNa",title:"block_title__1lipq"}},18:function(t,e,a){t.exports={container:"input_container__3RBGg",title:"input_title__Y4Xaw",input:"input_input__2tOEp",button:"input_button__AroBy"}},20:function(t,e,a){t.exports={container:"addStudentRow_container__2a3LF",addButton:"addStudentRow_addButton__2r79-"}},21:function(t,e,a){t.exports={container:"addFamilyRow_container__3O0aS",addButton:"addFamilyRow_addButton__3gm5o"}},34:function(t,e,a){t.exports={input:"SearchBox_input__3ryuD"}},35:function(t,e,a){t.exports={label:"label_label__1p9XO"}},36:function(t,e,a){t.exports={container:"studentList_container__35QpG"}},37:function(t,e,a){t.exports={container:"familyList_container__3xyRv"}},4:function(t,e,a){t.exports={container:"studentRow_container__2i_LP",id:"studentRow_id__2NKLv",name:"studentRow_name__3RPfH",dob:"studentRow_dob__wz56l",actions:"studentRow_actions__2Q7SV",buttonDelete:"studentRow_buttonDelete__1fwCR"}},5:function(t,e,a){t.exports={model:"modal_model__SYUsO",open:"modal_open__1n4-W",underlay:"modal_underlay__3jaBx",container:"modal_container__clBND",title:"modal_title__1b4vj",body:"modal_body__1AjZ6"}},6:function(t,e,a){t.exports={container:"familyRow_container__1h2gh",id:"familyRow_id__35uxI",name:"familyRow_name__k0rpk",relationship:"familyRow_relationship__2addB",nationality:"familyRow_nationality__1zPYw",dob:"familyRow_dob__1reVk"}},61:function(t,e,a){},62:function(t,e,a){"use strict";a.r(e);var n=a(1),s=a.n(n),i=a(31),c=a.n(i),r=a(15),o=a.n(r),l=a(14),d=a(2),u=a(22),j=a(32),b=a(33),m=Object(j.a)((function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=a.firstName,s=void 0===n?"":n,i=a.lastName,c=void 0===i?"":i,r=a.dateOfBirth,o=void 0===r?"":r,l=a.family,d=void 0===l?[]:l,u=a.draft,j=void 0!==u&&u;Object(b.a)(this,t),this.ID=void 0,this.firstName="",this.lastName="",this.dateOfBirth="",this.family=[],this.draft=!1,this.ID=e,this.firstName=s,this.lastName=c,this.dateOfBirth=o,this.family=d,this.draft=j})),f="ACTION_SET_SEARCH",_="ACTION_ADD_STUDENT_DRAFT",h="ACTION_HIDE_ADD_STUDENT_MODEL",O="ACTION_GET_STUDENTS",p="ACTION_POST_STUDENT",v="ACTION_PUT_STUDENT",N="ACTION_GET_FAMILY",y="ACTION_ADD_FAMILY_DRAFT",x="ACTION_SELECT_STUDENT",D="ACTION_SET_STUDENT_DETAIL",I=function(t,e){return t.findIndex((function(t){return t.ID===e}))};function S(t,e){switch(console.log({action:e}),e.type){case f:return Object(d.a)(Object(d.a)({},t),{},{searchQuery:e.payload});case O:return Object(d.a)(Object(d.a)({},t),{},{fetching:!1,students:e.payload});case x:return Object(d.a)(Object(d.a)({},t),{},{selectedStudentID:e.payload});case D:var a=t.students,n=t.selectedStudentID;return null!==n&&(a[I(a,n)]=e.payload),Object(d.a)(Object(d.a)({},t),{},{students:a});case N:var s=t.students;return s[I(s,e.payload.studentID)].family=e.payload.family,Object(d.a)(Object(d.a)({},t),{},{students:s});case v:var i=t.students;return i[I(i,e.payload.ID)].draft=!1,Object(d.a)(Object(d.a)({},t),{},{students:i});case p:var c=t.students;return Object(d.a)(Object(d.a)({},t),{},{students:[e.payload].concat(Object(u.a)(c))});case _:var r=t.students;return Object(d.a)(Object(d.a)({},t),{},{selectedStudentID:0,students:[new m(0,{draft:!0})].concat(Object(u.a)(r))});case h:var o=t.students;return Object(d.a)(Object(d.a)({},t),{},{selectedStudentID:null,students:o.filter((function(t){return!t.draft}))});case y:var l=t.students,j=t.selectedStudentID;if(null!==j){var b=l[I(l,j)];b.family.push({firstName:"TADA"}),l[I(l,j)]=b,console.log(b)}return Object(d.a)(Object(d.a)({},t),{},{students:l})}return t}function T(t,e){return console.log(e),t}var g={studentsData:Object(d.a)({},{students:[],fetching:!0,searchQuery:"",selectedStudentID:null}),userData:Object(d.a)({},{user:{type:"admin"}})},w=function(t,e){var a=t.studentsData,n=t.userData;return{studentsData:S(a,e),userData:T(n,e)}},C=a(0),A=Object(n.createContext)({state:g,dispatch:function(){return null}});function E(t){var e=t.children,a=Object(n.useReducer)(w,g),s=Object(l.a)(a,2),i={state:s[0],dispatch:s[1]};return console.log(i),Object(C.jsx)(A.Provider,{value:i,children:e})}var R=function(){return Object(n.useContext)(A)},B=function(){var t=R(),e=t.state,a=t.dispatch;return{searchQuery:e.studentsData.searchQuery,setSearch:function(t){a({type:f,payload:t})}}},k=a(34),F=a.n(k);function M(){var t=B(),e=t.searchQuery,a=t.setSearch;return Object(C.jsx)("input",{className:F.a.input,placeholder:"Search with ID, first name or last name",value:e,onChange:function(t){a(t.target.value)}})}var L=s.a.memo(M),P=a(8),U=a.n(P),Q="http://localhost:8088/api",q=function(t){var e="".concat(Q,"/Students");U.a.get(e).then((function(e){var a=e.data.map((function(t){return new m(t.ID,{firstName:t.firstName,lastName:t.lastName,dateOfBirth:t.dateOfBirth})}));t(function(t){return{type:O,payload:t}}(a))}))},G=function(t,e){var a="".concat(Q,"/Students/").concat(e,"/FamilyMembers/");U.a.get(a).then((function(a){var n;t((n=a.data||[],{type:N,payload:{family:n,studentID:e}}))}))},Y=function(t,e){var a="".concat(Q,"/Students");return U.a.post(a,e).then((function(e){var a,n=e.data;t((a=new m(n.ID,n),{type:p,payload:a}))}))},H=function(t,e){var a="".concat(Q,"/Students/").concat(e.ID);return U.a.put(a,e).then((function(e){var a,n=e.data;t((a=new m(n.ID,n),{type:v,payload:a}))}))},J=function(){var t=R(),e=t.state,a=t.dispatch,s=e.studentsData,i=s.students,c=s.fetching,r=s.searchQuery;Object(n.useEffect)((function(){i.length||q(a)}),[]);var o=i;return r&&(o=o.filter((function(t){return t.ID===parseInt(r,10)||-1!==[t.firstName,t.lastName].join(" ").toLowerCase().indexOf(r.toLowerCase())}))),{students:i,fetching:c,searchQuery:r,visibleStudents:o}},z=function(){var t=R(),e=t.state,a=t.dispatch;return{selectedStudentID:e.studentsData.selectedStudentID,showModel:function(t){a({type:_,payload:t})},hideModel:function(){a({type:h})}}},V=a(16),W=a.n(V);function K(t){var e=t.disabled,a=t.submit,n=t.children,s=t.className,i=t.onClick,c=t.mini,r=t.error,o=[W.a.button,s];return c&&o.push(W.a.mini),r&&o.push(W.a.error),Object(C.jsx)("button",{type:a?"submit":"button",disabled:e,className:o.join(" "),onClick:i||void 0,children:n})}K.defaultProps={className:"",disabled:!1,mini:!1,error:!1,submit:!1,onClick:void 0};var X=K,Z=a(20),$=a.n(Z);function tt(){var t=z().showModel;return Object(C.jsx)("div",{className:$.a.container,children:Object(C.jsx)(X,{className:$.a.addButton,onClick:function(){t(!0)},children:Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)("i",{className:"lni lni-plus"}),"Add Student"]})})})}var et=s.a.memo(tt),at=a(35),nt=a.n(at);function st(t){var e=t.label,a=t.className,n=void 0===a?"":a;return Object(C.jsx)("div",{className:[n,nt.a.label].join(" "),children:e})}st.defaultProps={className:""};var it=st,ct=a(4),rt=a.n(ct);function ot(t){var e=t.student,a=e.firstName,n=e.lastName,s=e.dateOfBirth,i=e.ID,c=R().dispatch;return Object(C.jsxs)("div",{className:rt.a.container,children:[Object(C.jsx)(it,{label:i,className:rt.a.id}),Object(C.jsx)(it,{label:"".concat(a),className:rt.a.name}),Object(C.jsx)(it,{label:n,className:rt.a.name}),Object(C.jsx)(it,{label:s,className:rt.a.dob}),Object(C.jsxs)("div",{className:rt.a.actions,children:[Object(C.jsx)(X,{className:rt.a.buttonDelete,mini:!0,error:!0,children:"Delete"}),Object(C.jsx)(X,{onClick:function(){c({type:x,payload:i})},mini:!0,children:"View/Edit"})]})]})}var lt=s.a.memo(ot),dt=a(36),ut=a.n(dt);var jt=function(){var t=J(),e=t.fetching,a=t.visibleStudents;return Object(C.jsxs)("div",{className:ut.a.container,children:[Object(C.jsx)(et,{}),a.map((function(t){return Object(C.jsx)(lt,{student:t},t.ID)})),a.length||e?null:"No Students there!!",e?"...":null]})},bt=a(13),mt=function(){var t=R().state.studentsData,e=t.students,a=t.selectedStudentID;return{student:e.find((function(t){return t.ID===a}))||new m(0)}},ft=a(17),_t=a.n(ft);function ht(t){var e=t.title,a=t.children,n=t.className,s=[_t.a.block,n];return Object(C.jsxs)("div",{className:s.join(" "),children:[Object(C.jsx)("span",{className:_t.a.title,children:e}),Object(C.jsx)("div",{className:_t.a.body,children:a})]})}ht.defaultProps={className:""};var Ot=ht,pt=a(18),vt=a.n(pt);function Nt(t){var e=t.disabled,a=t.className,n=t.onChange,s=t.title,i=t.type,c=t.required,r=void 0!==c&&c,o=t.name,d=t.value,u=d;if("date"===i&&d){var j=new Date(d).toISOString().split("T");u=Object(l.a)(j,1)[0]}return Object(C.jsxs)("div",{className:vt.a.container,children:[Object(C.jsx)("div",{className:vt.a.title,children:s}),Object(C.jsx)("input",{value:u,type:i,disabled:e,className:[vt.a.input,a].join(" "),onChange:n,required:r,name:o,placeholder:"date"===i?"mm - dd - yyyy":void 0,pattern:"date"===i?"\\d{2}-\\d{2}-\\d{4}":void 0})]})}Nt.defaultProps={className:"",disabled:!1,type:"text",required:!1};var yt=Nt,xt=a(5),Dt=a.n(xt);function It(t){var e=t.open,a=t.title,n=t.children,s=t.className,i=t.onClose,c=[Dt.a.model,s];return e&&c.push(Dt.a.open),Object(C.jsxs)("div",{className:c.join(" "),children:[Object(C.jsx)("div",{className:Dt.a.underlay}),Object(C.jsxs)("div",{className:Dt.a.container,children:[Object(C.jsxs)("div",{className:Dt.a.title,children:[a,Object(C.jsx)(X,{onClick:i,className:Dt.a.close,children:Object(C.jsx)("i",{className:"lni lni-close"})})]}),Object(C.jsx)("div",{className:Dt.a.body,children:n})]})]})}It.defaultProps={className:""};var St=It,Tt=function(){var t=R(),e=t.state,a=t.dispatch,s=e.studentsData,i=s.students,c=s.fetching,r=s.selectedStudentID,o=i.find((function(t){return t.ID===r}));Object(n.useEffect)((function(){null===r||!o||o.family.length||o.draft||G(a,r)}),[r,i]);var l=o?o.family:[];console.log(l);return{family:l,fetching:c,addFamily:function(){a(function(t){return{type:y,payload:t||void 0}}())}}},gt=a(21),wt=a.n(gt);function Ct(){var t=Tt().addFamily;return Object(C.jsx)("div",{className:wt.a.container,children:Object(C.jsx)(X,{className:wt.a.addButton,onClick:function(){t()},children:Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)("i",{className:"lni lni-plus"}),"Add Family Member"]})})})}var At=s.a.memo(Ct),Et=a(6),Rt=a.n(Et);function Bt(t){var e=t.family,a=e.firstName,n=e.lastName,s=e.dateOfBirth,i=e.ID,c=e.nationality,r=e.relationship,o=(c||{}).Title,l=void 0===o?"NA":o;return console.log(e),Object(C.jsxs)("div",{className:Rt.a.container,children:[Object(C.jsx)(it,{label:i,className:Rt.a.id}),Object(C.jsx)(it,{label:"".concat(a),className:Rt.a.name}),Object(C.jsx)(it,{label:n,className:Rt.a.name}),Object(C.jsx)(it,{label:r,className:Rt.a.relationship}),Object(C.jsx)(it,{label:l,className:Rt.a.nationality}),Object(C.jsx)(it,{label:s,className:Rt.a.dob})]})}var kt=s.a.memo(Bt),Ft=a(37),Mt=a.n(Ft);var Lt=function(){var t=Tt(),e=t.family,a=t.fetching;return Object(C.jsxs)("div",{className:Mt.a.container,children:[Object(C.jsx)(At,{}),e.map((function(t){return Object(C.jsx)(kt,{family:t},t.ID)})),e.length?null:"No Family there!!",a?"...":null]})},Pt=a(9),Ut=a.n(Pt);function Qt(){var t=z(),e=t.selectedStudentID,a=t.hideModel,n=mt().student,s=R().dispatch,i=n.firstName,c=n.lastName,r=n.dateOfBirth,o=function(t){var e=Object(d.a)(Object(d.a)({},n),{},Object(bt.a)({},t.target.name,t.target.value));s(function(t){return{type:D,payload:t}}(e))},l=null!==e,u=n.draft?"Add Student":"Edit Student";return Object(C.jsx)(St,{open:l,onClose:function(){a()},title:u,children:Object(C.jsxs)("form",{onSubmit:function(t){t.preventDefault(),(n.draft?Y(s,n):H(s,n)).then((function(){a()}))},className:Ut.a.form,children:[Object(C.jsxs)("div",{className:Ut.a.container,children:[Object(C.jsx)("div",{children:Object(C.jsx)(yt,{required:!0,title:"First Name",name:"firstName",onChange:o,value:i})}),Object(C.jsx)("div",{children:Object(C.jsx)(yt,{required:!0,title:"Last Name",name:"lastName",onChange:o,value:c})}),Object(C.jsx)("div",{children:Object(C.jsx)(yt,{required:!0,title:"Date of Birth",name:"dateOfBirth",onChange:o,value:r,type:"date"})}),Object(C.jsx)(Ot,{title:"Family Members",children:Object(C.jsx)(Lt,{})})]}),Object(C.jsx)("div",{className:Ut.a.actions,children:Object(C.jsx)(X,{submit:!0,className:Ut.a.button,children:"Save"})})]})})}var qt=s.a.memo(Qt);var Gt=function(){return Object(C.jsxs)("div",{className:o.a.app,children:[Object(C.jsx)("div",{className:o.a.searchContainer,children:Object(C.jsx)(L,{})}),Object(C.jsx)("div",{className:o.a.container,children:Object(C.jsx)(jt,{})}),Object(C.jsx)(qt,{})]})};a(61);c.a.render(Object(C.jsx)(s.a.StrictMode,{children:Object(C.jsx)(E,{children:Object(C.jsx)(Gt,{})})}),document.getElementById("root"))},9:function(t,e,a){t.exports={actions:"studentModel_actions__3RKIE",button:"studentModel_button__2OL2y",form:"studentModel_form__28bd7",container:"studentModel_container__1wsI0"}}},[[62,1,2]]]);
//# sourceMappingURL=main.db656a1d.chunk.js.map